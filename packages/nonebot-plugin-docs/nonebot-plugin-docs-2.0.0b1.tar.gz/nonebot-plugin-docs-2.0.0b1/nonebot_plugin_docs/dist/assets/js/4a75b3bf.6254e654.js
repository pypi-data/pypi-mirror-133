"use strict";(self.webpackChunknonebot=self.webpackChunknonebot||[]).push([[3278],{5318:function(e,n,a){a.r(n),a.d(n,{MDXContext:function(){return l},MDXProvider:function(){return c},mdx:function(){return f},useMDXComponents:function(){return s},withMDXComponents:function(){return m}});var r=a(7378);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function p(){return p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},p.apply(this,arguments)}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function o(e,n){if(null==e)return{};var a,r,t=function(e,n){if(null==e)return{};var a,r,t={},p=Object.keys(e);for(r=0;r<p.length;r++)a=p[r],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(r=0;r<p.length;r++)a=p[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var l=r.createContext({}),m=function(e){return function(n){var a=s(n.components);return r.createElement(e,p({},n,{components:a}))}},s=function(e){var n=r.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):d(d({},n),e)),a},c=function(e){var n=s(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},x=r.forwardRef((function(e,n){var a=e.components,t=e.mdxType,p=e.originalType,i=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),m=s(a),c=t,x=m["".concat(i,".").concat(c)]||m[c]||u[c]||p;return a?r.createElement(x,d(d({ref:n},l),{},{components:a})):r.createElement(x,d({ref:n},l))}));function f(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var p=a.length,i=new Array(p);i[0]=x;var d={};for(var o in n)hasOwnProperty.call(n,o)&&(d[o]=n[o]);d.originalType=e,d.mdxType="string"==typeof e?e:t,i[1]=d;for(var l=2;l<p;l++)i[l]=a[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}x.displayName="MDXCreateElement"},6557:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return d},contentTitle:function(){return o},metadata:function(){return l},toc:function(){return m},default:function(){return c}});var r=a(5773),t=a(808),p=(a(7378),a(5318)),i=["components"],d={},o="NoneBot.drivers.fastapi \u6a21\u5757",l={unversionedId:"api/drivers/fastapi",id:"api/drivers/fastapi",isDocsHomePage:!1,title:"NoneBot.drivers.fastapi \u6a21\u5757",description:"FastAPI \u9a71\u52a8\u9002\u914d",source:"@site/docs/api/drivers/fastapi.md",sourceDirName:"api/drivers",slug:"/api/drivers/fastapi",permalink:"/website/docs/next/api/drivers/fastapi",editUrl:"https://github.com/nonebot/nonebot2/edit/master/website/docs/api/drivers/fastapi.md",tags:[],version:"current",frontMatter:{},sidebar:"api",previous:{title:"NoneBot.drivers.aiohttp \u6a21\u5757",permalink:"/website/docs/next/api/drivers/aiohttp"},next:{title:"NoneBot.drivers.httpx \u6a21\u5757",permalink:"/website/docs/next/api/drivers/httpx"}},m=[{value:"FastAPI \u9a71\u52a8\u9002\u914d",id:"fastapi-\u9a71\u52a8\u9002\u914d",children:[],level:2},{value:"<em>class</em> <code>Config</code>",id:"class-config",children:[{value:"<code>fastapi_openapi_url</code>",id:"fastapi_openapi_url",children:[],level:3},{value:"<code>fastapi_docs_url</code>",id:"fastapi_docs_url",children:[],level:3},{value:"<code>fastapi_redoc_url</code>",id:"fastapi_redoc_url",children:[],level:3},{value:"<code>fastapi_reload</code>",id:"fastapi_reload",children:[],level:3},{value:"<code>fastapi_reload_dirs</code>",id:"fastapi_reload_dirs",children:[],level:3},{value:"<code>fastapi_reload_delay</code>",id:"fastapi_reload_delay",children:[],level:3},{value:"<code>fastapi_reload_includes</code>",id:"fastapi_reload_includes",children:[],level:3},{value:"<code>fastapi_reload_excludes</code>",id:"fastapi_reload_excludes",children:[],level:3}],level:2},{value:"<em>class</em> <code>Driver</code>",id:"class-driver",children:[{value:"<em>property</em> <code>type</code>",id:"property-type",children:[],level:3},{value:"<em>property</em> <code>server_app</code>",id:"property-server_app",children:[],level:3},{value:"<em>property</em> <code>asgi</code>",id:"property-asgi",children:[],level:3},{value:"<em>property</em> <code>logger</code>",id:"property-logger",children:[],level:3},{value:"<code>on_startup(func)</code>",id:"on_startupfunc",children:[],level:3},{value:"<code>on_shutdown(func)</code>",id:"on_shutdownfunc",children:[],level:3},{value:"<code>run(host=None, port=None, *, app=None, **kwargs)</code>",id:"runhostnone-portnone--appnone-kwargs",children:[],level:3}],level:2}],s={toc:m};function c(e){var n=e.components,a=(0,t.Z)(e,i);return(0,p.mdx)("wrapper",(0,r.Z)({},s,a,{components:n,mdxType:"MDXLayout"}),(0,p.mdx)("h1",{id:"nonebotdriversfastapi-\u6a21\u5757"},"NoneBot.drivers.fastapi \u6a21\u5757"),(0,p.mdx)("h2",{id:"fastapi-\u9a71\u52a8\u9002\u914d"},"FastAPI \u9a71\u52a8\u9002\u914d"),(0,p.mdx)("p",null,"\u672c\u9a71\u52a8\u540c\u65f6\u652f\u6301\u670d\u52a1\u7aef\u4ee5\u53ca\u5ba2\u6237\u7aef\u8fde\u63a5"),(0,p.mdx)("p",null,"\u540e\u7aef\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003: ",(0,p.mdx)("a",{parentName:"p",href:"https://fastapi.tiangolo.com/"},"FastAPI \u6587\u6863")),(0,p.mdx)("h2",{id:"class-config"},(0,p.mdx)("em",{parentName:"h2"},"class")," ",(0,p.mdx)("inlineCode",{parentName:"h2"},"Config")),(0,p.mdx)("p",null,"\u57fa\u7c7b\uff1a",(0,p.mdx)("inlineCode",{parentName:"p"},"pydantic.env_settings.BaseSettings")),(0,p.mdx)("p",null,"FastAPI \u9a71\u52a8\u6846\u67b6\u8bbe\u7f6e\uff0c\u8be6\u60c5\u53c2\u8003 FastAPI \u6587\u6863"),(0,p.mdx)("h3",{id:"fastapi_openapi_url"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_openapi_url")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[str]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"openapi.json")," \u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a ",(0,p.mdx)("inlineCode",{parentName:"p"},"None")," \u5373\u5173\u95ed"))),(0,p.mdx)("h3",{id:"fastapi_docs_url"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_docs_url")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[str]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"swagger")," \u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a ",(0,p.mdx)("inlineCode",{parentName:"p"},"None")," \u5373\u5173\u95ed"))),(0,p.mdx)("h3",{id:"fastapi_redoc_url"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_redoc_url")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[str]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"redoc")," \u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a ",(0,p.mdx)("inlineCode",{parentName:"p"},"None")," \u5373\u5173\u95ed"))),(0,p.mdx)("h3",{id:"fastapi_reload"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"bool"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u5f00\u542f/\u5173\u95ed\u51b7\u91cd\u8f7d"))),(0,p.mdx)("h3",{id:"fastapi_reload_dirs"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload_dirs")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[List[str]]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u91cd\u8f7d\u76d1\u63a7\u6587\u4ef6\u5939\u5217\u8868\uff0c\u9ed8\u8ba4\u4e3a uvicorn \u9ed8\u8ba4\u503c"))),(0,p.mdx)("h3",{id:"fastapi_reload_delay"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload_delay")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[float]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u91cd\u8f7d\u5ef6\u8fdf\uff0c\u9ed8\u8ba4\u4e3a uvicorn \u9ed8\u8ba4\u503c"))),(0,p.mdx)("h3",{id:"fastapi_reload_includes"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload_includes")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[List[str]]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u8981\u76d1\u542c\u7684\u6587\u4ef6\u5217\u8868\uff0c\u652f\u6301 glob pattern\uff0c\u9ed8\u8ba4\u4e3a uvicorn \u9ed8\u8ba4\u503c"))),(0,p.mdx)("h3",{id:"fastapi_reload_excludes"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload_excludes")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[List[str]]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u4e0d\u8981\u76d1\u542c\u7684\u6587\u4ef6\u5217\u8868\uff0c\u652f\u6301 glob pattern\uff0c\u9ed8\u8ba4\u4e3a uvicorn \u9ed8\u8ba4\u503c"))),(0,p.mdx)("h2",{id:"class-driver"},(0,p.mdx)("em",{parentName:"h2"},"class")," ",(0,p.mdx)("inlineCode",{parentName:"h2"},"Driver")),(0,p.mdx)("p",null,"\u57fa\u7c7b\uff1a",(0,p.mdx)("a",{parentName:"p",href:"/website/docs/next/api/drivers/#nonebot.drivers.ReverseDriver"},(0,p.mdx)("inlineCode",{parentName:"a"},"nonebot.drivers.ReverseDriver"))),(0,p.mdx)("p",null,"FastAPI \u9a71\u52a8\u6846\u67b6\u3002\u5305\u542b\u53cd\u5411 Server \u529f\u80fd\u3002"),(0,p.mdx)("h3",{id:"property-type"},(0,p.mdx)("em",{parentName:"h3"},"property")," ",(0,p.mdx)("inlineCode",{parentName:"h3"},"type")),(0,p.mdx)("p",null,"\u9a71\u52a8\u540d\u79f0: ",(0,p.mdx)("inlineCode",{parentName:"p"},"fastapi")),(0,p.mdx)("h3",{id:"property-server_app"},(0,p.mdx)("em",{parentName:"h3"},"property")," ",(0,p.mdx)("inlineCode",{parentName:"h3"},"server_app")),(0,p.mdx)("p",null,(0,p.mdx)("inlineCode",{parentName:"p"},"FastAPI APP")," \u5bf9\u8c61"),(0,p.mdx)("h3",{id:"property-asgi"},(0,p.mdx)("em",{parentName:"h3"},"property")," ",(0,p.mdx)("inlineCode",{parentName:"h3"},"asgi")),(0,p.mdx)("p",null,(0,p.mdx)("inlineCode",{parentName:"p"},"FastAPI APP")," \u5bf9\u8c61"),(0,p.mdx)("h3",{id:"property-logger"},(0,p.mdx)("em",{parentName:"h3"},"property")," ",(0,p.mdx)("inlineCode",{parentName:"h3"},"logger")),(0,p.mdx)("p",null,"fastapi \u4f7f\u7528\u7684 logger"),(0,p.mdx)("h3",{id:"on_startupfunc"},(0,p.mdx)("inlineCode",{parentName:"h3"},"on_startup(func)")),(0,p.mdx)("p",null,"\u53c2\u8003\u6587\u6863: ",(0,p.mdx)("a",{parentName:"p",href:"https://fastapi.tiangolo.com/advanced/events/#startup-event"},"Events")),(0,p.mdx)("h3",{id:"on_shutdownfunc"},(0,p.mdx)("inlineCode",{parentName:"h3"},"on_shutdown(func)")),(0,p.mdx)("p",null,"\u53c2\u8003\u6587\u6863: ",(0,p.mdx)("a",{parentName:"p",href:"https://fastapi.tiangolo.com/advanced/events/#startup-event"},"Events")),(0,p.mdx)("h3",{id:"runhostnone-portnone--appnone-kwargs"},(0,p.mdx)("inlineCode",{parentName:"h3"},"run(host=None, port=None, *, app=None, **kwargs)")),(0,p.mdx)("p",null,"\u4f7f\u7528 ",(0,p.mdx)("inlineCode",{parentName:"p"},"uvicorn")," \u542f\u52a8 FastAPI"))}c.isMDXComponent=!0}}]);