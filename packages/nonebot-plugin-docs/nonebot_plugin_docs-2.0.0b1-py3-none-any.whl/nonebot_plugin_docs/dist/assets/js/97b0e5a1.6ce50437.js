"use strict";(self.webpackChunknonebot=self.webpackChunknonebot||[]).push([[1915],{5318:function(e,a,n){n.r(a),n.d(a,{MDXContext:function(){return l},MDXProvider:function(){return c},mdx:function(){return f},useMDXComponents:function(){return s},withMDXComponents:function(){return m}});var r=n(7378);function t(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function p(){return p=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){t(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,r,t=function(e,a){if(null==e)return{};var n,r,t={},p=Object.keys(e);for(r=0;r<p.length;r++)n=p[r],a.indexOf(n)>=0||(t[n]=e[n]);return t}(e,a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(r=0;r<p.length;r++)n=p[r],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var l=r.createContext({}),m=function(e){return function(a){var n=s(a.components);return r.createElement(e,p({},a,{components:n}))}},s=function(e){var a=r.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):d(d({},a),e)),n},c=function(e){var a=s(e.components);return r.createElement(l.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},x=r.forwardRef((function(e,a){var n=e.components,t=e.mdxType,p=e.originalType,i=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),m=s(n),c=t,x=m["".concat(i,".").concat(c)]||m[c]||u[c]||p;return n?r.createElement(x,d(d({ref:a},l),{},{components:n})):r.createElement(x,d({ref:a},l))}));function f(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var p=n.length,i=new Array(p);i[0]=x;var d={};for(var o in a)hasOwnProperty.call(a,o)&&(d[o]=a[o]);d.originalType=e,d.mdxType="string"==typeof e?e:t,i[1]=d;for(var l=2;l<p;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}x.displayName="MDXCreateElement"},514:function(e,a,n){n.r(a),n.d(a,{frontMatter:function(){return d},contentTitle:function(){return o},metadata:function(){return l},toc:function(){return m},default:function(){return c}});var r=n(5773),t=n(808),p=(n(7378),n(5318)),i=["components"],d={},o="NoneBot.drivers.fastapi \u6a21\u5757",l={unversionedId:"api/drivers/fastapi",id:"version-2.0.0-beta.1/api/drivers/fastapi",isDocsHomePage:!1,title:"NoneBot.drivers.fastapi \u6a21\u5757",description:"FastAPI \u9a71\u52a8\u9002\u914d",source:"@site/versioned_docs/version-2.0.0-beta.1/api/drivers/fastapi.md",sourceDirName:"api/drivers",slug:"/api/drivers/fastapi",permalink:"/website/docs/api/drivers/fastapi",editUrl:"https://github.com/nonebot/nonebot2/edit/master/website/versioned_docs/version-2.0.0-beta.1/api/drivers/fastapi.md",tags:[],version:"2.0.0-beta.1",lastUpdatedBy:"yanyongyu",lastUpdatedAt:1641641779,formattedLastUpdatedAt:"2022/1/8",frontMatter:{},sidebar:"version-2.0.0-beta.1/api",previous:{title:"NoneBot.drivers.aiohttp \u6a21\u5757",permalink:"/website/docs/api/drivers/aiohttp"},next:{title:"NoneBot.drivers.httpx \u6a21\u5757",permalink:"/website/docs/api/drivers/httpx"}},m=[{value:"FastAPI \u9a71\u52a8\u9002\u914d",id:"fastapi-\u9a71\u52a8\u9002\u914d",children:[],level:2},{value:"<em>class</em> <code>Config</code>",id:"class-config",children:[{value:"<code>fastapi_openapi_url</code>",id:"fastapi_openapi_url",children:[],level:3},{value:"<code>fastapi_docs_url</code>",id:"fastapi_docs_url",children:[],level:3},{value:"<code>fastapi_redoc_url</code>",id:"fastapi_redoc_url",children:[],level:3},{value:"<code>fastapi_reload</code>",id:"fastapi_reload",children:[],level:3},{value:"<code>fastapi_reload_dirs</code>",id:"fastapi_reload_dirs",children:[],level:3},{value:"<code>fastapi_reload_delay</code>",id:"fastapi_reload_delay",children:[],level:3},{value:"<code>fastapi_reload_includes</code>",id:"fastapi_reload_includes",children:[],level:3},{value:"<code>fastapi_reload_excludes</code>",id:"fastapi_reload_excludes",children:[],level:3}],level:2},{value:"<em>class</em> <code>Driver</code>",id:"class-driver",children:[{value:"<em>property</em> <code>type</code>",id:"property-type",children:[],level:3},{value:"<em>property</em> <code>server_app</code>",id:"property-server_app",children:[],level:3},{value:"<em>property</em> <code>asgi</code>",id:"property-asgi",children:[],level:3},{value:"<em>property</em> <code>logger</code>",id:"property-logger",children:[],level:3},{value:"<code>on_startup(func)</code>",id:"on_startupfunc",children:[],level:3},{value:"<code>on_shutdown(func)</code>",id:"on_shutdownfunc",children:[],level:3},{value:"<code>run(host=None, port=None, *, app=None, **kwargs)</code>",id:"runhostnone-portnone--appnone-kwargs",children:[],level:3}],level:2}],s={toc:m};function c(e){var a=e.components,n=(0,t.Z)(e,i);return(0,p.mdx)("wrapper",(0,r.Z)({},s,n,{components:a,mdxType:"MDXLayout"}),(0,p.mdx)("h1",{id:"nonebotdriversfastapi-\u6a21\u5757"},"NoneBot.drivers.fastapi \u6a21\u5757"),(0,p.mdx)("h2",{id:"fastapi-\u9a71\u52a8\u9002\u914d"},"FastAPI \u9a71\u52a8\u9002\u914d"),(0,p.mdx)("p",null,"\u672c\u9a71\u52a8\u540c\u65f6\u652f\u6301\u670d\u52a1\u7aef\u4ee5\u53ca\u5ba2\u6237\u7aef\u8fde\u63a5"),(0,p.mdx)("p",null,"\u540e\u7aef\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003: ",(0,p.mdx)("a",{parentName:"p",href:"https://fastapi.tiangolo.com/"},"FastAPI \u6587\u6863")),(0,p.mdx)("h2",{id:"class-config"},(0,p.mdx)("em",{parentName:"h2"},"class")," ",(0,p.mdx)("inlineCode",{parentName:"h2"},"Config")),(0,p.mdx)("p",null,"\u57fa\u7c7b\uff1a",(0,p.mdx)("inlineCode",{parentName:"p"},"pydantic.env_settings.BaseSettings")),(0,p.mdx)("p",null,"FastAPI \u9a71\u52a8\u6846\u67b6\u8bbe\u7f6e\uff0c\u8be6\u60c5\u53c2\u8003 FastAPI \u6587\u6863"),(0,p.mdx)("h3",{id:"fastapi_openapi_url"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_openapi_url")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[str]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"openapi.json")," \u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a ",(0,p.mdx)("inlineCode",{parentName:"p"},"None")," \u5373\u5173\u95ed"))),(0,p.mdx)("h3",{id:"fastapi_docs_url"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_docs_url")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[str]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"swagger")," \u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a ",(0,p.mdx)("inlineCode",{parentName:"p"},"None")," \u5373\u5173\u95ed"))),(0,p.mdx)("h3",{id:"fastapi_redoc_url"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_redoc_url")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[str]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"redoc")," \u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a ",(0,p.mdx)("inlineCode",{parentName:"p"},"None")," \u5373\u5173\u95ed"))),(0,p.mdx)("h3",{id:"fastapi_reload"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"bool"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u5f00\u542f/\u5173\u95ed\u51b7\u91cd\u8f7d"))),(0,p.mdx)("h3",{id:"fastapi_reload_dirs"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload_dirs")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[List[str]]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u91cd\u8f7d\u76d1\u63a7\u6587\u4ef6\u5939\u5217\u8868\uff0c\u9ed8\u8ba4\u4e3a uvicorn \u9ed8\u8ba4\u503c"))),(0,p.mdx)("h3",{id:"fastapi_reload_delay"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload_delay")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[float]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u91cd\u8f7d\u5ef6\u8fdf\uff0c\u9ed8\u8ba4\u4e3a uvicorn \u9ed8\u8ba4\u503c"))),(0,p.mdx)("h3",{id:"fastapi_reload_includes"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload_includes")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[List[str]]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u8981\u76d1\u542c\u7684\u6587\u4ef6\u5217\u8868\uff0c\u652f\u6301 glob pattern\uff0c\u9ed8\u8ba4\u4e3a uvicorn \u9ed8\u8ba4\u503c"))),(0,p.mdx)("h3",{id:"fastapi_reload_excludes"},(0,p.mdx)("inlineCode",{parentName:"h3"},"fastapi_reload_excludes")),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u7c7b\u578b")),(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("inlineCode",{parentName:"p"},"Optional[List[str]]"))),(0,p.mdx)("li",{parentName:"ul"},(0,p.mdx)("p",{parentName:"li"},(0,p.mdx)("strong",{parentName:"p"},"\u8bf4\u660e")),(0,p.mdx)("p",{parentName:"li"},"\u4e0d\u8981\u76d1\u542c\u7684\u6587\u4ef6\u5217\u8868\uff0c\u652f\u6301 glob pattern\uff0c\u9ed8\u8ba4\u4e3a uvicorn \u9ed8\u8ba4\u503c"))),(0,p.mdx)("h2",{id:"class-driver"},(0,p.mdx)("em",{parentName:"h2"},"class")," ",(0,p.mdx)("inlineCode",{parentName:"h2"},"Driver")),(0,p.mdx)("p",null,"\u57fa\u7c7b\uff1a",(0,p.mdx)("a",{parentName:"p",href:"/website/docs/api/drivers/#nonebot.drivers.ReverseDriver"},(0,p.mdx)("inlineCode",{parentName:"a"},"nonebot.drivers.ReverseDriver"))),(0,p.mdx)("p",null,"FastAPI \u9a71\u52a8\u6846\u67b6\u3002\u5305\u542b\u53cd\u5411 Server \u529f\u80fd\u3002"),(0,p.mdx)("h3",{id:"property-type"},(0,p.mdx)("em",{parentName:"h3"},"property")," ",(0,p.mdx)("inlineCode",{parentName:"h3"},"type")),(0,p.mdx)("p",null,"\u9a71\u52a8\u540d\u79f0: ",(0,p.mdx)("inlineCode",{parentName:"p"},"fastapi")),(0,p.mdx)("h3",{id:"property-server_app"},(0,p.mdx)("em",{parentName:"h3"},"property")," ",(0,p.mdx)("inlineCode",{parentName:"h3"},"server_app")),(0,p.mdx)("p",null,(0,p.mdx)("inlineCode",{parentName:"p"},"FastAPI APP")," \u5bf9\u8c61"),(0,p.mdx)("h3",{id:"property-asgi"},(0,p.mdx)("em",{parentName:"h3"},"property")," ",(0,p.mdx)("inlineCode",{parentName:"h3"},"asgi")),(0,p.mdx)("p",null,(0,p.mdx)("inlineCode",{parentName:"p"},"FastAPI APP")," \u5bf9\u8c61"),(0,p.mdx)("h3",{id:"property-logger"},(0,p.mdx)("em",{parentName:"h3"},"property")," ",(0,p.mdx)("inlineCode",{parentName:"h3"},"logger")),(0,p.mdx)("p",null,"fastapi \u4f7f\u7528\u7684 logger"),(0,p.mdx)("h3",{id:"on_startupfunc"},(0,p.mdx)("inlineCode",{parentName:"h3"},"on_startup(func)")),(0,p.mdx)("p",null,"\u53c2\u8003\u6587\u6863: ",(0,p.mdx)("a",{parentName:"p",href:"https://fastapi.tiangolo.com/advanced/events/#startup-event"},"Events")),(0,p.mdx)("h3",{id:"on_shutdownfunc"},(0,p.mdx)("inlineCode",{parentName:"h3"},"on_shutdown(func)")),(0,p.mdx)("p",null,"\u53c2\u8003\u6587\u6863: ",(0,p.mdx)("a",{parentName:"p",href:"https://fastapi.tiangolo.com/advanced/events/#startup-event"},"Events")),(0,p.mdx)("h3",{id:"runhostnone-portnone--appnone-kwargs"},(0,p.mdx)("inlineCode",{parentName:"h3"},"run(host=None, port=None, *, app=None, **kwargs)")),(0,p.mdx)("p",null,"\u4f7f\u7528 ",(0,p.mdx)("inlineCode",{parentName:"p"},"uvicorn")," \u542f\u52a8 FastAPI"))}c.isMDXComponent=!0}}]);